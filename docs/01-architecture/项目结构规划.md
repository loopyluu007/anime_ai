# é¡¹ç›®ç»“æ„è§„åˆ’

> **ç›®æ ‡**: å®šä¹‰æ‹†åˆ†åçš„ä¸‰å¤§æ¨¡å—çš„ç›®å½•ç»“æ„  
> **ç‰ˆæœ¬**: v1.0

---

## ğŸ“‹ ç›®å½•

1. [æ•´ä½“ç»“æ„](#æ•´ä½“ç»“æ„)
2. [åç«¯æœåŠ¡ç»“æ„](#åç«¯æœåŠ¡ç»“æ„)
3. [ç§»åŠ¨ç«¯ç»“æ„](#ç§»åŠ¨ç«¯ç»“æ„)
4. [Web ç«¯ç»“æ„](#web-ç«¯ç»“æ„)
5. [å…±äº«èµ„æº](#å…±äº«èµ„æº)

---

## ğŸ—ï¸ æ•´ä½“ç»“æ„

```
anime_ai/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ api-gateway/           # API ç½‘å…³
â”‚   â”œâ”€â”€ services/              # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ shared/                # å…±äº«æ¨¡å—
â”‚   â””â”€â”€ infrastructure/        # åŸºç¡€è®¾æ–½
â”œâ”€â”€ mobile-app/                # ç§»åŠ¨ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ lib/                   # Dart ä»£ç 
â”‚   â”œâ”€â”€ android/               # Android é…ç½®
â”‚   â””â”€â”€ ios/                   # iOS é…ç½®
â”œâ”€â”€ web-app/                   # Web ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ lib/                   # Dart ä»£ç ï¼ˆä¸ç§»åŠ¨ç«¯å…±äº«éƒ¨åˆ†ï¼‰
â”‚   â””â”€â”€ web/                   # Web èµ„æº
â”œâ”€â”€ shared/                    # è·¨æ¨¡å—å…±äº«
â”‚   â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ api-spec/              # API è§„èŒƒï¼ˆOpenAPIï¼‰
â”‚   â””â”€â”€ docs/                  # æ–‡æ¡£
â””â”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
```

---

## ğŸ”§ åç«¯æœåŠ¡ç»“æ„

```
backend/
â”œâ”€â”€ api-gateway/               # API ç½‘å…³æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.py           # å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py       # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ rate_limit.py # é™æµä¸­é—´ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ cors.py       # CORS ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ routes/           # è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ gateway.py    # ç½‘å…³è·¯ç”±
â”‚   â”‚   â””â”€â”€ config/           # é…ç½®
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ agent-service/        # Agent ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”‚   â”œâ”€â”€ api/          # API è·¯ç”±
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ conversations.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tasks.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ screenplays.py
â”‚   â”‚   â”‚   â”œâ”€â”€ services/     # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ conversation_service.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ task_service.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ screenplay_service.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ agent_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ clients/       # å¤–éƒ¨ API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ glm_client.py
â”‚   â”‚   â”‚   â”œâ”€â”€ models/       # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ conversation.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ task.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ screenplay.py
â”‚   â”‚   â”‚   â””â”€â”€ utils/         # å·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”‚   â””â”€â”€ Dockerfile
â”‚   â”‚
â”‚   â”œâ”€â”€ media-service/         # åª’ä½“æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”‚   â”œâ”€â”€ api/           # API è·¯ç”±
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ images.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ videos.py
â”‚   â”‚   â”‚   â”œâ”€â”€ services/      # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ image_service.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ video_service.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ storage_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ clients/       # å¤–éƒ¨ API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tuzi_client.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ gemini_client.py
â”‚   â”‚   â”‚   â”œâ”€â”€ processors/    # å¤„ç†å™¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ffmpeg_processor.py
â”‚   â”‚   â”‚   â””â”€â”€ models/        # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”‚   â””â”€â”€ Dockerfile
â”‚   â”‚
â”‚   â””â”€â”€ data-service/          # æ•°æ®æœåŠ¡
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ main.py
â”‚       â”‚   â”œâ”€â”€ api/           # API è·¯ç”±
â”‚       â”‚   â”‚   â”œâ”€â”€ users.py
â”‚       â”‚   â”‚   â””â”€â”€ analytics.py
â”‚       â”‚   â”œâ”€â”€ services/      # ä¸šåŠ¡é€»è¾‘
â”‚       â”‚   â”‚   â”œâ”€â”€ user_service.py
â”‚       â”‚   â”‚   â””â”€â”€ analytics_service.py
â”‚       â”‚   â”œâ”€â”€ repositories/  # æ•°æ®è®¿é—®å±‚
â”‚       â”‚   â”‚   â”œâ”€â”€ user_repository.py
â”‚       â”‚   â”‚   â”œâ”€â”€ conversation_repository.py
â”‚       â”‚   â”‚   â””â”€â”€ task_repository.py
â”‚       â”‚   â””â”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚       â”œâ”€â”€ requirements.txt
â”‚       â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ shared/                     # å…±äº«æ¨¡å—
â”‚   â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”œâ”€â”€ conversation.py
â”‚   â”‚   â”œâ”€â”€ message.py
â”‚   â”‚   â”œâ”€â”€ task.py
â”‚   â”‚   â””â”€â”€ screenplay.py
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ logger.py
â”‚   â”‚   â”œâ”€â”€ exceptions.py
â”‚   â”‚   â””â”€â”€ validators.py
â”‚   â””â”€â”€ config/                 # é…ç½®
â”‚       â”œâ”€â”€ database.py
â”‚       â””â”€â”€ redis.py
â”‚
â”œâ”€â”€ infrastructure/             # åŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ database/               # æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ migrations/        # æ•°æ®åº“è¿ç§»
â”‚   â”‚   â”‚   â””â”€â”€ 001_initial.sql  # åˆå§‹è¿ç§»ï¼ˆåŒ…å«æ‰€æœ‰è¡¨ç»“æ„å’Œç´¢å¼•ï¼‰
â”‚   â”‚   â””â”€â”€ seeds/             # ç§å­æ•°æ®
â”‚   â”œâ”€â”€ docker/                # Docker é…ç½®
â”‚   â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”‚   â”œâ”€â”€ Dockerfile.gateway
â”‚   â”‚   â”œâ”€â”€ Dockerfile.agent
â”‚   â”‚   â”œâ”€â”€ Dockerfile.media
â”‚   â”‚   â””â”€â”€ Dockerfile.data
â”‚   â””â”€â”€ nginx/                  # Nginx é…ç½®
â”‚       â””â”€â”€ nginx.conf
â”‚
â”œâ”€â”€ tests/                      # æµ‹è¯•
â”‚   â”œâ”€â”€ unit/                   # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/            # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ e2e/                    # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚
â”œâ”€â”€ scripts/                    # è„šæœ¬
â”‚   â”œâ”€â”€ migrate.py             # æ•°æ®è¿ç§»
â”‚   â”œâ”€â”€ seed.py                # ç§å­æ•°æ®
â”‚   â””â”€â”€ deploy.sh               # éƒ¨ç½²è„šæœ¬
â”‚
â”œâ”€â”€ .env.example                # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

## ğŸ“± ç§»åŠ¨ç«¯ç»“æ„ â¸ï¸ å·²æç½®

> **çŠ¶æ€è¯´æ˜**: ç§»åŠ¨ç«¯å¼€å‘å·²æ ‡è®°ä¸ºæç½®ï¼Œæš‚æ—¶ä¸éœ€è¦å¼€å‘ï¼Œæœªæ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ä¸ä¼šéœ€è¦ã€‚ä½†å·²ç¼–å†™çš„ä»£ç å°†ä¿ç•™åœ¨ä»£ç åº“ä¸­ã€‚

```
mobile-app/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart              # åº”ç”¨å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                  # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ api/               # API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ api_client.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_client.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ conversation_client.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ task_client.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ screenplay_client.dart
â”‚   â”‚   â”‚   â””â”€â”€ media_client.dart
â”‚   â”‚   â”œâ”€â”€ storage/           # æœ¬åœ°å­˜å‚¨
â”‚   â”‚   â”‚   â”œâ”€â”€ local_storage.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ cache_manager.dart
â”‚   â”‚   â”‚   â””â”€â”€ hive_service.dart
â”‚   â”‚   â”œâ”€â”€ cache/             # ç¼“å­˜
â”‚   â”‚   â”‚   â”œâ”€â”€ image_cache.dart
â”‚   â”‚   â”‚   â””â”€â”€ video_cache.dart
â”‚   â”‚   â”œâ”€â”€ config/            # é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ app_config.dart
â”‚   â”‚   â”‚   â””â”€â”€ api_config.dart
â”‚   â”‚   â””â”€â”€ utils/             # å·¥å…·ç±»
â”‚   â”‚       â”œâ”€â”€ logger.dart
â”‚   â”‚       â”œâ”€â”€ validators.dart
â”‚   â”‚       â””â”€â”€ formatters.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ features/              # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ auth/              # è®¤è¯åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login_screen.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ register_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth_provider.dart
â”‚   â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚   â”‚       â””â”€â”€ user.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ chat/              # èŠå¤©åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat_screen.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ conversation_list_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ message_bubble.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ message_input.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ screenplay_card.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat_provider.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ conversation_provider.dart
â”‚   â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚   â”‚       â”œâ”€â”€ message.dart
â”‚   â”‚   â”‚       â””â”€â”€ conversation.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ screenplay/        # å‰§æœ¬åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ screenplay_review_screen.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ screenplay_detail_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ scene_card.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ character_sheet_card.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ progress_indicator.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ screenplay_provider.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ task_provider.dart
â”‚   â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚   â”‚       â”œâ”€â”€ screenplay.dart
â”‚   â”‚   â”‚       â”œâ”€â”€ scene.dart
â”‚   â”‚   â”‚       â””â”€â”€ character_sheet.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ gallery/           # å›¾åº“åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ gallery_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ media_grid.dart
â”‚   â”‚   â”‚   â””â”€â”€ providers/
â”‚   â”‚   â”‚       â””â”€â”€ gallery_provider.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ settings/          # è®¾ç½®åŠŸèƒ½
â”‚   â”‚       â”œâ”€â”€ screens/
â”‚   â”‚       â”‚   â””â”€â”€ settings_screen.dart
â”‚   â”‚       â”œâ”€â”€ widgets/
â”‚   â”‚       â”‚   â””â”€â”€ settings_tile.dart
â”‚   â”‚       â””â”€â”€ providers/
â”‚   â”‚           â””â”€â”€ settings_provider.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                # å…±äº«æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ widgets/           # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ loading_indicator.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ error_widget.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ empty_state.dart
â”‚   â”‚   â”‚   â””â”€â”€ video_player.dart
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ date_utils.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ string_utils.dart
â”‚   â”‚   â”‚   â””â”€â”€ file_utils.dart
â”‚   â”‚   â””â”€â”€ themes/            # ä¸»é¢˜
â”‚   â”‚       â”œâ”€â”€ app_theme.dart
â”‚   â”‚       â””â”€â”€ colors.dart
â”‚   â”‚
â”‚   â””â”€â”€ platform/              # å¹³å°ç‰¹å®šï¼ˆå¦‚æœ‰éœ€è¦ï¼‰
â”‚
â”œâ”€â”€ android/                    # Android é…ç½®
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ build.gradle
â”‚   â”‚   â””â”€â”€ src/main/
â”‚   â”‚       â”œâ”€â”€ AndroidManifest.xml
â”‚   â”‚       â””â”€â”€ kotlin/.../MainActivity.kt
â”‚   â””â”€â”€ build.gradle
â”‚
â”œâ”€â”€ ios/                       # iOS é…ç½®
â”‚   â”œâ”€â”€ Runner/
â”‚   â”‚   â”œâ”€â”€ Info.plist
â”‚   â”‚   â””â”€â”€ AppDelegate.swift
â”‚   â””â”€â”€ Podfile
â”‚
â”œâ”€â”€ test/                      # æµ‹è¯•
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ widget/
â”‚   â””â”€â”€ integration/
â”‚
â”œâ”€â”€ assets/                    # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ fonts/
â”‚   â””â”€â”€ icons/
â”‚
â”œâ”€â”€ pubspec.yaml
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

## ğŸŒ Web ç«¯ç»“æ„

```
web-app/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart              # åº”ç”¨å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                  # æ ¸å¿ƒæ¨¡å—ï¼ˆä¸ç§»åŠ¨ç«¯å…±äº«ï¼‰
â”‚   â”‚   â”œâ”€â”€ api/               # API å®¢æˆ·ç«¯ï¼ˆå…±äº«ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ ...            # ä¸ç§»åŠ¨ç«¯ç›¸åŒ
â”‚   â”‚   â”œâ”€â”€ storage/           # Web å­˜å‚¨é€‚é…
â”‚   â”‚   â”‚   â”œâ”€â”€ web_storage_adapter.dart
â”‚   â”‚   â”‚   â””â”€â”€ indexed_db_adapter.dart
â”‚   â”‚   â”œâ”€â”€ config/            # é…ç½®ï¼ˆå…±äº«ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ ...            # ä¸ç§»åŠ¨ç«¯ç›¸åŒ
â”‚   â”‚   â””â”€â”€ utils/             # å·¥å…·ç±»ï¼ˆå…±äº«ï¼‰
â”‚   â”‚       â””â”€â”€ ...            # ä¸ç§»åŠ¨ç«¯ç›¸åŒ
â”‚   â”‚
â”‚   â”œâ”€â”€ features/              # åŠŸèƒ½æ¨¡å—ï¼ˆä¸ç§»åŠ¨ç«¯å…±äº«ï¼‰
â”‚   â”‚   â”œâ”€â”€ auth/              # è®¤è¯åŠŸèƒ½
â”‚   â”‚   â”‚   â””â”€â”€ ...            # ä¸ç§»åŠ¨ç«¯ç›¸åŒ
â”‚   â”‚   â”œâ”€â”€ chat/              # èŠå¤©åŠŸèƒ½
â”‚   â”‚   â”‚   â””â”€â”€ ...            # ä¸ç§»åŠ¨ç«¯ç›¸åŒ
â”‚   â”‚   â”œâ”€â”€ screenplay/        # å‰§æœ¬åŠŸèƒ½
â”‚   â”‚   â”‚   â””â”€â”€ ...            # ä¸ç§»åŠ¨ç«¯ç›¸åŒ
â”‚   â”‚   â”œâ”€â”€ gallery/           # å›¾åº“åŠŸèƒ½
â”‚   â”‚   â”‚   â””â”€â”€ ...            # ä¸ç§»åŠ¨ç«¯ç›¸åŒ
â”‚   â”‚   â””â”€â”€ settings/          # è®¾ç½®åŠŸèƒ½
â”‚   â”‚       â””â”€â”€ ...            # ä¸ç§»åŠ¨ç«¯ç›¸åŒ
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                # å…±äº«æ¨¡å—ï¼ˆä¸ç§»åŠ¨ç«¯å…±äº«ï¼‰
â”‚   â”‚   â”œâ”€â”€ widgets/           # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ...            # ä¸ç§»åŠ¨ç«¯ç›¸åŒ
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·ç±»
â”‚   â”‚   â”‚   â””â”€â”€ ...            # ä¸ç§»åŠ¨ç«¯ç›¸åŒ
â”‚   â”‚   â””â”€â”€ themes/            # ä¸»é¢˜
â”‚   â”‚       â””â”€â”€ ...            # ä¸ç§»åŠ¨ç«¯ç›¸åŒ
â”‚   â”‚
â”‚   â””â”€â”€ web/                   # Web ç‰¹å®š
â”‚       â”œâ”€â”€ adapters/          # Web é€‚é…å™¨
â”‚       â”‚   â”œâ”€â”€ storage_adapter.dart
â”‚       â”‚   â”œâ”€â”€ video_adapter.dart
â”‚       â”‚   â”œâ”€â”€ file_adapter.dart
â”‚       â”‚   â””â”€â”€ image_picker_adapter.dart
â”‚       â”œâ”€â”€ utils/             # Web å·¥å…·
â”‚       â”‚   â”œâ”€â”€ pwa_utils.dart
â”‚       â”‚   â””â”€â”€ seo_utils.dart
â”‚       â””â”€â”€ workers/            # Web Workers
â”‚           â””â”€â”€ video_worker.dart
â”‚
â”œâ”€â”€ web/                       # Web èµ„æº
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ manifest.json
â”‚   â”œâ”€â”€ favicon.png
â”‚   â”œâ”€â”€ icons/                 # PWA å›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ icon-192.png
â”‚   â”‚   â””â”€â”€ icon-512.png
â”‚   â””â”€â”€ assets/                # é™æ€èµ„æº
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ test/                      # æµ‹è¯•
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ widget/
â”‚   â””â”€â”€ integration/
â”‚
â”œâ”€â”€ pubspec.yaml
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

## ğŸ”„ å…±äº«èµ„æº

### å…±äº«æ•°æ®æ¨¡å‹

```
shared/
â”œâ”€â”€ models/                    # æ•°æ®æ¨¡å‹å®šä¹‰ï¼ˆå„ç«¯å®ç°ï¼‰
â”‚   â”œâ”€â”€ user.dart              # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ conversation.dart      # å¯¹è¯æ¨¡å‹
â”‚   â”œâ”€â”€ message.dart           # æ¶ˆæ¯æ¨¡å‹
â”‚   â”œâ”€â”€ task.dart              # ä»»åŠ¡æ¨¡å‹
â”‚   â”œâ”€â”€ screenplay.dart       # å‰§æœ¬æ¨¡å‹
â”‚   â”œâ”€â”€ scene.dart             # åœºæ™¯æ¨¡å‹
â”‚   â””â”€â”€ character_sheet.dart   # è§’è‰²è®¾å®šæ¨¡å‹
â”‚
â”œâ”€â”€ api-spec/                  # API è§„èŒƒ
â”‚   â”œâ”€â”€ openapi.yaml           # OpenAPI è§„èŒƒ
â”‚   â””â”€â”€ postman/               # Postman é›†åˆ
â”‚       â””â”€â”€ collection.json
â”‚
â””â”€â”€ docs/                      # å…±äº«æ–‡æ¡£
    â”œâ”€â”€ api/                   # API æ–‡æ¡£
    â”œâ”€â”€ architecture/          # æ¶æ„æ–‡æ¡£
    â””â”€â”€ guides/                # å¼€å‘æŒ‡å—
```

### ä»£ç å…±äº«ç­–ç•¥

#### 1. ä½¿ç”¨ Git Submoduleï¼ˆæ¨èï¼‰

```
mobile-app/
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ shared/ -> ../../shared/models/
â””â”€â”€ pubspec.yaml

web-app/
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ shared/ -> ../../shared/models/
â””â”€â”€ pubspec.yaml
```

#### 2. ä½¿ç”¨ Dart Package

åˆ›å»ºç‹¬ç«‹çš„ Dart åŒ…ï¼š

```
shared_package/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ api/
â”‚   â””â”€â”€ utils/
â”œâ”€â”€ pubspec.yaml
â””â”€â”€ README.md
```

åœ¨ `mobile-app/pubspec.yaml` å’Œ `web-app/pubspec.yaml` ä¸­å¼•ç”¨ï¼š

```yaml
dependencies:
  shared_package:
    path: ../shared_package
```

#### 3. ä½¿ç”¨ç¬¦å·é“¾æ¥ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

```bash
# ç§»åŠ¨ç«¯
ln -s ../../shared/models lib/shared/models

# Web ç«¯
ln -s ../../shared/models lib/shared/models
```

---

## ğŸ“¦ ä¾èµ–ç®¡ç†

### åç«¯ä¾èµ–

```python
# requirements.txt (Python)
fastapi==0.104.1
uvicorn==0.24.0
sqlalchemy==2.0.23
psycopg2-binary==2.9.9
redis==5.0.1
pydantic==2.5.0
python-jose==3.3.0
python-multipart==0.0.6
```

### ç§»åŠ¨ç«¯ä¾èµ– â¸ï¸ å·²æç½®

> **çŠ¶æ€è¯´æ˜**: ç§»åŠ¨ç«¯å¼€å‘å·²æ ‡è®°ä¸ºæç½®ï¼Œä»¥ä¸‹ä¾èµ–ä¿¡æ¯ä»…ä¾›å‚è€ƒï¼Œä»£ç å·²ä¿ç•™ä½†ä¸å†ç»§ç»­å¼€å‘ã€‚

```yaml
# pubspec.yaml
dependencies:
  flutter:
    sdk: flutter
  provider: ^6.1.1
  dio: ^5.4.0
  hive: ^2.2.3
  hive_flutter: ^1.1.0
  video_player: ^2.8.2
  chewie: ^1.7.4
  cached_network_image: ^3.3.1
  shared_preferences: ^2.2.2
  # ... å…¶ä»–ä¾èµ–
```

### Web ç«¯ä¾èµ–

```yaml
# pubspec.yaml
dependencies:
  flutter:
    sdk: flutter
  provider: ^6.1.1
  dio: ^5.4.0
  hive: ^2.2.3
  hive_flutter: ^1.1.0
  video_player: ^2.8.2
  cached_network_image: ^3.3.1
  shared_preferences: ^2.2.2
  # Web ç‰¹å®šä¾èµ–
  # ... å…¶ä»–ä¾èµ–
```

---

## ğŸ”§ æ„å»ºå’Œéƒ¨ç½²

### åç«¯æ„å»º

```bash
# æ„å»º Docker é•œåƒ
docker build -t directorai-backend:latest -f infrastructure/docker/Dockerfile.agent .

# ä½¿ç”¨ Docker Compose
docker-compose up -d
```

### ç§»åŠ¨ç«¯æ„å»º â¸ï¸ å·²æç½®

> **çŠ¶æ€è¯´æ˜**: ç§»åŠ¨ç«¯å¼€å‘å·²æ ‡è®°ä¸ºæç½®ï¼Œä»¥ä¸‹æ„å»ºå‘½ä»¤ä»…ä¾›å‚è€ƒï¼Œä»£ç å·²ä¿ç•™ä½†ä¸å†ç»§ç»­å¼€å‘ã€‚

```bash
# Android
flutter build apk --release
flutter build appbundle --release

# iOS
flutter build ios --release
```

### Web ç«¯æ„å»º

```bash
# æ„å»º Web åº”ç”¨
flutter build web --release

# éƒ¨ç½²åˆ°æœåŠ¡å™¨
# å°† build/web ç›®å½•éƒ¨ç½²åˆ° Nginx æˆ– CDN
```

---

## ğŸ“ é…ç½®æ–‡ä»¶ç¤ºä¾‹

### åç«¯ç¯å¢ƒå˜é‡

```env
# .env
DATABASE_URL=postgresql://user:password@localhost:5432/directorai
REDIS_URL=redis://localhost:6379
JWT_SECRET=your-secret-key
GLM_API_KEY=your-glm-api-key
TUZI_API_KEY=your-tuzi-api-key
GEMINI_API_KEY=your-gemini-api-key
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
```

### ç§»åŠ¨ç«¯é…ç½® â¸ï¸ å·²æç½®

> **çŠ¶æ€è¯´æ˜**: ç§»åŠ¨ç«¯å¼€å‘å·²æ ‡è®°ä¸ºæç½®ï¼Œä»¥ä¸‹é…ç½®ä¿¡æ¯ä»…ä¾›å‚è€ƒï¼Œä»£ç å·²ä¿ç•™ä½†ä¸å†ç»§ç»­å¼€å‘ã€‚

```dart
// lib/core/config/api_config.dart
class ApiConfig {
  static const String baseUrl = 'https://api.directorai.com/api/v1';
  static const String wsUrl = 'wss://api.directorai.com/ws';
}
```

### Web ç«¯é…ç½®

```dart
// lib/core/config/api_config.dart
class ApiConfig {
  static const String baseUrl = 'https://api.directorai.com/api/v1';
  static const String wsUrl = 'wss://api.directorai.com/ws';
}
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### 2026-01-13
- â¸ï¸ ç§»åŠ¨ç«¯å¼€å‘æ ‡è®°ä¸ºæç½®
  - å°†ç§»åŠ¨ç«¯å¼€å‘çŠ¶æ€æ ‡è®°ä¸ºæç½®
  - æ˜ç¡®è¯´æ˜æš‚æ—¶ä¸éœ€è¦å¼€å‘ï¼Œæœªæ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ä¸ä¼šéœ€è¦
  - å·²ç¼–å†™çš„ä»£ç ä¿ç•™åœ¨ä»£ç åº“ä¸­

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.1  
**æœ€åæ›´æ–°**: 2026-01-13
